(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-01-01"],{"0b00":function(o,n,e){"use strict";var t;e.d(n,"b",(function(){return c})),e.d(n,"c",(function(){return s})),e.d(n,"a",(function(){return t}));var c=function(){var o=this,n=o.$createElement,e=o._self._c||n;return e("v-uni-view")},s=[]},cb83:function(o,n,e){"use strict";e.r(n);var t=e("0b00"),c=e("d35f");for(var s in c)"default"!==s&&function(o){e.d(n,o,(function(){return c[o]}))}(s);var i,r=e("f0c5"),u=Object(r["a"])(c["default"],t["b"],t["c"],!1,null,"00fa7d1e",null,!1,t["a"],i);n["default"]=u.exports},d35f:function(o,n,e){"use strict";e.r(n);var t=e("fa9a"),c=e.n(t);for(var s in t)"default"!==s&&function(o){e.d(n,o,(function(){return t[o]}))}(s);n["default"]=c.a},fa9a:function(o,n,e){"use strict";e("d3b7"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var t={data:function(){return{room_id:14,room_sub_id:3,uid:3,open_no:20230606167}},methods:{connectSocket:function(){var o=this;console.log("调用连接websocket"),this.socketTask=uni.connectSocket({url:"ws://101.37.80.196:2346",success:function(o){console.log("websocket连接成功")},fail:function(o){console.log("报错",o)}}),this.socketTask.onOpen((function(n){console.log("WebSocket连接已打开！"),o.heart()})),this.socketTask.onMessage((function(o){console.log("收到服务器内容：------------"+o.data)})),this.socketTask.onError((function(n){console.log("WebSocket连接打开失败，请检查！"),console.log(n),o.reconnect()})),this.socketTask.onClose((function(n){console.log("WebSocket连接关闭！"),clearInterval(o.timer),o.timer="",o.isClose||o.reconnect()})),console.log(this.socketTask)},reconnect:function(){console.log("进入断线重连"),this.socketTask=null,this.connectSocket()},sendSocketMessage:function(o){var n=this;return console.log("发送信息"),console.log(o),new Promise((function(e,t){n.socketTask.send({data:o,success:function(o){console.log("发送成功0000000000",o),e(o)},fail:function(o){console.log("发送失败"),console.log(o),t(o)}})}))},heart:function(){var o=this;clearInterval(this.timer),this.timer="";var n={type:"heartbeat",room_id:this.room_id,room_sub_id:this.room_sub_id,open_no:this.open_no,uid:this.uid};this.timer=setInterval((function(){o.sendSocketMessage(JSON.stringify(n))}),5e3)}},onShow:function(){this.connectSocket()}};n.default=t}}]);